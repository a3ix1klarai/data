<!doctype html>
<html lang="en">
    
<!-- Mirrored from www.sierrachart.com/index.php?page=doc/StudiesReference.php&ID=212&Name=Market_Structure_MSL_MSH by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:58:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Sierra Chart is a professional Trading platform for the financial markets. Supporting Manual, Automated and Simulated Trading." >
        <meta name="keywords" content="online trading platform, charting software, futures, stock, forex, discretionary trading, automated trading, trade simulator, trading system development, trading strategy development" >         

        <link rel="stylesheet" type="text/css" href="../images/minified.css" >
        
        <link rel="icon" type="image/png" sizes="192x192" href="../images/favicon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
        
        <script type="text/javascript" src="../images/jquery-2.2.4.min.js"></script>
        
        <script type="text/javascript">

    function HasPageBeenModified(filemtime = '1546897603') {
        $.ajax({
            url: '/Ajax.php',
            type: 'post',
            data: {
              'Service': 'Page',
              'Do': 'HasPageBeenModified',
              'filemtime': filemtime,
              'FileName': 'doc/StudiesReference.php',
            },
            success: function(data, status) {
              if(data['result'] == "NewPageEdits" && data['Content']) {
                    $('#NewPageEdits').remove();
                    $('#container').append('<div id="NewPageEdits">'+data['Content']+'</div>')
                    $('#NewPageEdits').dialog({
                        width: 150,
                        position: { at: 'right-96 top-5%'},
                        modal: false,
                        resizable: false,
                        create: function (event, ui) { $(event.target).parent().css('position', 'fixed'); }
                    });

                    $(".ui-dialog-titlebar").hide();
              }
            },
            error: function(xhr, desc, err) {
              console.log(xhr);
              console.log("Details: " + desc + " | Error:" + err);
            }
        });

    }

    window.setInterval(HasPageBeenModified , 900000);

</script>

        <title> Sierra Chart</title>
    </head>               
    <body>
        <div id="container">
            <div id="banner" class="pure-g">
    <div class="pure-u-1 pure-u-md-1-3">
        <a href="index.html"><img src="../images/sierrachartlogo.png" alt="Sierra Chart - Financial Market Charting and Trading Software" class="logo"></a>
    </div>
    <div class="pure-u-1 pure-u-md-2-3">
        <div class="pure-g">
            <div class="pure-u-1-2" style="text-align: right;">
            <div class="pure-form CSSDarkMode">
    <form method="GET">
        <input type="hidden" name="DarkMode" value="1">
        <button type="submit" class="pure-button pure-button-primary">Toggle Dark Mode</button>
    </form>
</div>
            </div>            
            <div class="pure-u-1-2">
            <div class="pure-form SearchBar">
    <form action="https://search.sierrachart.com/" method="GET">
        <input name="Query" value="" type="text" placeholder="Find" size="25">
        <input type="hidden" name="submitted" value="true">
        <input type="submit" value="Search" class="pure-button">
    </form>
</div>
            </div>
            <div class="pure-u-1">
                <h2 class="title">Sierra Chart</h2> 
                <p class="tagline">Financial Markets Charting and Trading Platform</p>    
            </div>
        </div>
    </div>
</div>
            <div class="pure-menu pure-menu-horizontal top-nav-bar">
    <ul class="pure-menu-list">
        <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Main</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index.html">Home</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa55d.html?page=doc/Whats_New.php">What Is New</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0b8.html?page=doc/Features.php">Features</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index15fc.html?page=doc/Image_gallery.php">User Image Gallery</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index079e.html?page=doc/AdditionalFiles.php">Additional Files</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9cbb.html?page=doc/AboutUs.php" >About Us</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3367.html?page=doc/OtherSitesLinks.php">Other Websites</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Documentation</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0ca.html?page=doc/Contents.php">Table of Contents</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexef11.html?page=doc/help.php">Frequently Asked Questions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa2db.html?page=doc/VideoLibrary.php">Video Library</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php#Services">Symbols</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3d0c.html?page=doc/DevelopingCustomStudiesAndSystems.php">Developing for Sierra Chart</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index648b.html?page=doc/BrokerServices.html">Services for Brokers</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Getting Started</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index7904.html?page=doc/helpdetails59.php">What Is Included in Free Trial</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9a78.html?page=doc/FuturesData.php">Understanding Real-time  Futures Data</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Account Management</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="passwordreset.html">Account Password Reset</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="registerstep1.html">Create Account</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=AddAccountCredit">Make a Payment</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=ServicesActivation">Activate Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index2a8e.html?page=doc/PurchaseInformation.php">License and Purchase Info</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa1cf.html?page=doc/Packages.php">Pricing</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Support</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index1c87.html?page=doc/support.html">Contact</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/SupportBoard.php">* Support Board *</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index8727.html?page=doc/SelfHelp.php&amp;Source=Ticket">Self Help/Account Support Tickets</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexeb88.html?page=doc/SierraChartStudyAndSystemProgrammers.php">Study &amp; System Programmers</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=StudyStore">Custom Studies Store/List</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index6fe4.html?page=doc/BlockedDomains.php">Blocked Email Domains for Alerts</a></li>
            </ul>
        </li>
    </ul>
</div>
                        
<form action="https://www.sierrachart.com/UserControlPanel.php" method="post" style="margin-top:3.1em;" class="SmallLoginLogOutForm" title="Enter your Sierra Chart Account Name and Password.">
    <input class="TextInput" name="username" placeholder="SC Account Name">
    <input class="TextInput" name="password" type="password">
    <input type="submit" value="Login" >
    <input type="hidden" name="RedirectTo" value="indexf675.html?page=doc/StudiesReference.php&amp;ID=212&amp;Name=Market_Structure_MSL_MSH" >
    <a href="https://www.sierrachart.com/UserControlPanel.php" target="_blank" rel="noopener noreferrer">Login Page</a>
     - <a href="registerstep1.html">Create Account</a>
    
</form>

            <div class="content">
<div class="HierarchyLinks"> <h4 id="top"><a href="index.html">Home</a> &gt;&gt; <a  href="indexc0ca.html?page=doc/Contents.php#StudiesIndicators">(Table of Contents) Studies and Indicators</a> &gt;&gt; <a  href="indexeb8c.html?page=doc/TechnicalStudiesReference.php">Technical Studies Reference</a> &gt;&gt; <a href="indexebe7.html?page=doc/StudiesReference.php&amp;ID=212">Market Structure MSL MSH</a></h4> </div> <h1 class="PageName">Technical Studies Reference</h1>

<section class="h2">
    <ul>
        <li><a href="indexeb8c.html?page=doc/TechnicalStudiesReference.php">Technical Studies Reference</a></li>
        <li><a href="index2db8.html?page=doc/StudiesReference_CommonStudyInputs.php" target="_blank" rel="noopener noreferrer">Common Study Inputs</a> (Opens a new page)</li>
        <li><a href="index9099.html?page=doc/ChartStudies.html#AddingModifyingStudies" target="_blank" rel="noopener noreferrer">Using Studies</a> (Opens a new page)</li>
    </ul>
</section>
<hr>

<h1 class="PageName">Market Structure MSL/MSH</h1>

<section class="h3">
    <p>This study identifies Market Structure Lows and Highs on the chart. The bars where these occur will be colored. The color to use is controlled through the Subgraph color settings. You can also optionally show Labels on the bars.</p>
    
    <p>Let \(O_t\), \(H_t\), \(L_t\), and \(C_t\) be the Open, High, Low, and Close Prices, respectively, at Index \(t\). We denote the Market Structure High and Market Structure Low functions at Index \(t\) as \(MSH_t\) and \(MSL_t\), respectively, and we compute them for \(t \geq 2\) as follows.</p>
    
    \(\displaystyle{MSH_t = \left\{ \begin{matrix} 1 & (O_{t - 1} < C_{t - 1} \space and \space O_t < C_t \space and \space O_{t + 1} > C_{t + 1}) \space and \space (H_{t - 1} < H_t \space and \space H_{t + 1} < H_t) \\ 0 & otherwise \end{matrix}\right .}\)
    
    <br>
    <br>
    
    \(\displaystyle{MSL_t = \left\{ \begin{matrix} 1 & (O_{t - 1} > C_{t - 1} \space and \space O_t > C_t \space and \space O_{t + 1} < C_{t + 1}) \space and \space (L_{t - 1} > L_t \space and \space L_{t + 1} > L_t) \\ 0 & otherwise \end{matrix}\right .}\)
    
    <p>The Label at Index \(t\), if there is one, is denoted as \(Label_t\). A bar has a Label only if either \(MSH\) or \(MSL\) has a value of \(1\) at that bar. The possible values of the Labels are \(HH\) (Higher High), \(LH\) (Lower High), \(LL\) (Lower Low), and \(HL\) (Higher Low). These labels are displayed only if the <b>Draw Labels</b> Input is set to Yes. Below we describe in detail how the value of the Label for a given bar is determined.</p>
    
    <ul>
        <li>
            <p>Case 1: \(MSH_t = 1\)</p>
            
            <p>We enumerate the values of the Index \(t\) at which \(MSH_t = 1\) as \(T^{(MSH)}_i\), where \(i = 1, 2, 3, ...\). The Labels \(HH\) and \(LH\) can only appear at these values of the Index.</p>
            
            <p>For \(i = 1\), we have \(Label_{T^{(MSH)}_1} = HH\)</p>
            
            <p>For \(i > 1\), we have the following.</p>
            
            \(\displaystyle{Label_{T^{(MSH)}_i} = \left\{ \begin{matrix} HH & H_{T^{(MSH)}_{i - 1}} < H_{T^{(MSH)}_i} \\ Label_{T^{(MSH)}_{i - 1}} & H_{T^{(MSH)}_{i - 1}} = H_{T^{(MSH)}_i} \\ LH & H_{T^{(MSH)}_{i - 1}} > H_{T^{(MSH)}_i} \end{matrix}\right .}\)
            
            <p>The bars with Indices \(T^{(MSH)}_i\) are colored purple by default. If the labels are displayed, then they appear above their corresponding bars at a vertical position \(H_{T^{(MSH)}_i} + \frac{k}{100}\left(H_{T^{(MSH)}_i} - L_{T^{(MSH)}_i}\right)\), where \(k\) denotes the <b>Text Labels Percentage Offset</b> Input.</p> 
            
            <p>If the <b>Display Price Values</b> Input is set to Yes, then the High Price \(H_{T^{(MSH)}_i}\) appears in the Label at Index \(t = T^{(MSH)}_i\)</p>   
        </li>
        <li>
            <p>Case 2: \(MSL_t = 1\)</p>
            
            <p>We enumerate the values of the Index \(t\) at which \(MSL_t = 1\) as \(T^{(MSL)}_i\), where \(i = 1, 2, 3, ...\). The Labels \(LL\) and \(HL\) can only appear at these values of the Index.</p>
            
            <p>For \(i = 1\), we have \(Label_{T^{(MSL)}_1} = LL\)</p>
            
            <p>For \(i > 1\), we have the following.</p>
            
            \(\displaystyle{Label_{T^{(MSL)}_i} = \left\{ \begin{matrix} LL & L_{T^{(MSL)}_{i - 1}} > L_{T^{(MSL)}_i} \\ Label_{T^{(MSL)}_{i - 1}} & L_{T^{(MSL)}_{i - 1}} = L_{T^{(MSL)}_i} \\ HL & L_{T^{(MSL)}_{i - 1}} < L_{T^{(MSL)}_i} \end{matrix}\right .}\)
            
            <p>The bars with Indices \(T^{(MSL)}_i\) are colored orange by default. If the labels are displayed, then they appear below their corresponding bars at a vertical position \(L_{T^{(MSL)}_i} - \frac{k}{100}\left(H_{T^{(MSL)}_i} - L_{T^{(MSL)}_i}\right)\), where \(k\) denotes the <b>Text Labels Percentage Offset</b> Input.</p> 
            
            <p>If the <b>Display Price Values</b> Input is set to Yes, then the Low Price \(L_{T^{(MSL)}_i}\) appears in the Label at Index \(t = T^{(MSL)}_i\)</p>   
        </li>
    </ul>
    
    
    <section class="h4">
        <h4>Inputs</h4>
        <ul>
            <li><b>Draw Labels</b>: If this is set to Yes, then HH (Higher High), LH (Lower High), LL (Lower Low), HL (Higher Low) labels will be displayed.</li>
            <li><b>Text Labels Percentage Offset</b>: This is the actual price value that you want to offset the labels from the Highs or Lows of the price bars. Usually 0 is fine unless the labels are too close.</li>
            <li><b>Display Price Values</b>: When this Input is set to Yes and the Draw Labels Input is also set to Yes, then the low or high price for the bar will be displayed as well.</li>
        </ul>
    </section>
    <section class="h4">
        <h4> Spreadsheet</h4>
        
         <p>The spreadsheet below contains  the formulas for this study in Spreadsheet format.  Save this Spreadsheet to the  <a href="index899f.html?page=doc/GeneralSettings.html#DataFilesFolder"  Target="_blank" rel="noopener noreferrer">Data Files Folder</a>. </p>
         
         <p>Open it through <b class = "menu_item">File &gt;&gt; Open Spreadsheet</b>.  </p>
         
         <p> <a href="https://www.sierrachart.com/SpreadsheetFiles/Market_Structure_MSL_MSH.212.scss" >Market_Structure_MSL_MSH.212.scss</a> </p>
    </section>   
</section>

<hr><p>*Last modified Monday, 26th September, 2022.</p><script type="text/javascript">

      function HasStudyFileBeenModified(filemtime = '1664175602') {
        $.ajax({
            url: '/Ajax.php',
            type: 'post',
            data: {
              'Service': 'Page',
              'Do': 'HasStudyFileBeenModified',
              'filemtime': filemtime,
              'StudyID': '212',
            },
            success: function(data, status) {
              if(data['result'] == "NewPageEdits" && data['Content']) {
                    $('#NewPageEdits').remove();
                    $('#container').append('<div id="NewPageEdits">'+data['Content']+'</div>')
                    $('#NewPageEdits').dialog({
                        width: 150,
                        position: { at: 'right-96 top-5%'},
                        modal: false,
                        resizable: false,
                        create: function (event, ui) { $(event.target).parent().css('position', 'fixed'); }
                    });

                    $(".ui-dialog-titlebar").hide();
              }
            },
            error: function(xhr, desc, err) {
              console.log(xhr);
              console.log("Details: " + desc + " | Error:" + err);
            }
        });

    }

    window.setInterval(HasPageBeenModified , 900000);

</script>

<script type="text/javascript" async src="../images/mathjaxb198.js?config=TeX-MML-AM_CHTML"></script>



                <div id="footer" style="font-size:66%" class="ClearBoth">
                    <hr>
                    <a href="index2a8e.html?page=doc/PurchaseInformation.php" target="_blank" rel="noopener noreferrer">Service Terms and Refund Policy</a>
                    <br><br>
                    
                </div>
            </div>
        </div>
        <script type="text/javascript" src="../images/minified.js"></script>
    </body>

<!-- Mirrored from www.sierrachart.com/index.php?page=doc/StudiesReference.php&ID=212&Name=Market_Structure_MSL_MSH by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:58:42 GMT -->
</html>  