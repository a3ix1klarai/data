<!doctype html>
<html lang="en">
    
<!-- Mirrored from www.sierrachart.com/index.php?page=doc/MarketDepthDataFileFormat.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:55:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Sierra Chart is a professional Trading platform for the financial markets. Supporting Manual, Automated and Simulated Trading." >
        <meta name="keywords" content="online trading platform, charting software, futures, stock, forex, discretionary trading, automated trading, trade simulator, trading system development, trading strategy development" >         

        <link rel="stylesheet" type="text/css" href="../images/minified.css" >
        
        <link rel="icon" type="image/png" sizes="192x192" href="../images/favicon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
        
        <script type="text/javascript" src="../images/jquery-2.2.4.min.js"></script>
        
        <script type="text/javascript">

    function HasPageBeenModified(filemtime = '1677105663') {
        $.ajax({
            url: '/Ajax.php',
            type: 'post',
            data: {
              'Service': 'Page',
              'Do': 'HasPageBeenModified',
              'filemtime': filemtime,
              'FileName': 'doc/MarketDepthDataFileFormat.html',
            },
            success: function(data, status) {
              if(data['result'] == "NewPageEdits" && data['Content']) {
                    $('#NewPageEdits').remove();
                    $('#container').append('<div id="NewPageEdits">'+data['Content']+'</div>')
                    $('#NewPageEdits').dialog({
                        width: 150,
                        position: { at: 'right-96 top-5%'},
                        modal: false,
                        resizable: false,
                        create: function (event, ui) { $(event.target).parent().css('position', 'fixed'); }
                    });

                    $(".ui-dialog-titlebar").hide();
              }
            },
            error: function(xhr, desc, err) {
              console.log(xhr);
              console.log("Details: " + desc + " | Error:" + err);
            }
        });

    }

    window.setInterval(HasPageBeenModified , 900000);

</script>

        <title>Market Depth Data File Format -  Sierra Chart</title>
    </head>               
    <body>
        <div id="container">
            <div id="banner" class="pure-g">
    <div class="pure-u-1 pure-u-md-1-3">
        <a href="index.html"><img src="../images/sierrachartlogo.png" alt="Sierra Chart - Financial Market Charting and Trading Software" class="logo"></a>
    </div>
    <div class="pure-u-1 pure-u-md-2-3">
        <div class="pure-g">
            <div class="pure-u-1-2" style="text-align: right;">
            <div class="pure-form CSSDarkMode">
    <form method="GET">
        <input type="hidden" name="DarkMode" value="1">
        <button type="submit" class="pure-button pure-button-primary">Toggle Dark Mode</button>
    </form>
</div>
            </div>            
            <div class="pure-u-1-2">
            <div class="pure-form SearchBar">
    <form action="https://search.sierrachart.com/" method="GET">
        <input name="Query" value="" type="text" placeholder="Find" size="25">
        <input type="hidden" name="submitted" value="true">
        <input type="submit" value="Search" class="pure-button">
    </form>
</div>
            </div>
            <div class="pure-u-1">
                <h2 class="title">Sierra Chart</h2> 
                <p class="tagline">Financial Markets Charting and Trading Platform</p>    
            </div>
        </div>
    </div>
</div>
            <div class="pure-menu pure-menu-horizontal top-nav-bar">
    <ul class="pure-menu-list">
        <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Main</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index.html">Home</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa55d.html?page=doc/Whats_New.php">What Is New</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0b8.html?page=doc/Features.php">Features</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index15fc.html?page=doc/Image_gallery.php">User Image Gallery</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index079e.html?page=doc/AdditionalFiles.php">Additional Files</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9cbb.html?page=doc/AboutUs.php" >About Us</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3367.html?page=doc/OtherSitesLinks.php">Other Websites</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Documentation</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0ca.html?page=doc/Contents.php">Table of Contents</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexef11.html?page=doc/help.php">Frequently Asked Questions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa2db.html?page=doc/VideoLibrary.php">Video Library</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php#Services">Symbols</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3d0c.html?page=doc/DevelopingCustomStudiesAndSystems.php">Developing for Sierra Chart</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index648b.html?page=doc/BrokerServices.html">Services for Brokers</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Getting Started</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index7904.html?page=doc/helpdetails59.php">What Is Included in Free Trial</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9a78.html?page=doc/FuturesData.php">Understanding Real-time  Futures Data</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Account Management</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="passwordreset.html">Account Password Reset</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="registerstep1.html">Create Account</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=AddAccountCredit">Make a Payment</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=ServicesActivation">Activate Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index2a8e.html?page=doc/PurchaseInformation.php">License and Purchase Info</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa1cf.html?page=doc/Packages.php">Pricing</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Support</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index1c87.html?page=doc/support.html">Contact</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/SupportBoard.php">* Support Board *</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index8727.html?page=doc/SelfHelp.php&amp;Source=Ticket">Self Help/Account Support Tickets</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexeb88.html?page=doc/SierraChartStudyAndSystemProgrammers.php">Study &amp; System Programmers</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=StudyStore">Custom Studies Store/List</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index6fe4.html?page=doc/BlockedDomains.php">Blocked Email Domains for Alerts</a></li>
            </ul>
        </li>
    </ul>
</div>
                        
<form action="https://www.sierrachart.com/UserControlPanel.php" method="post" style="margin-top:3.1em;" class="SmallLoginLogOutForm" title="Enter your Sierra Chart Account Name and Password.">
    <input class="TextInput" name="username" placeholder="SC Account Name">
    <input class="TextInput" name="password" type="password">
    <input type="submit" value="Login" >
    <input type="hidden" name="RedirectTo" value="index85d3.html?page=doc/MarketDepthDataFileFormat.html" >
    <a href="https://www.sierrachart.com/UserControlPanel.php" target="_blank" rel="noopener noreferrer">Login Page</a>
     - <a href="registerstep1.html">Create Account</a>
    
</form>

            <div class="content">
<div class="HierarchyLinks"> <h4 id="top"><a href="index.html">Home</a> &gt;&gt; <a  href="indexc0ca.html?page=doc/Contents.php#ExternalInterfaces">(Table of Contents) External Interfaces</a> &gt;&gt; <a  href="index85d3.html?page=doc/MarketDepthDataFileFormat.html">Market Depth Data File Format</a></h4> </div>     <h1 class="PageName">Market Depth Data File Format</h1>

<ul>
    <li><a href="#DataStructures">Market Depth Data File Structures Used</a></li>
	<li><a href="#s_MarketDepthFileRecord">s_MarketDepthFileRecord Structure Member Descriptions</a>
		<ul>
		    <li><a href="#s_MarketDepthFileRecord_Command">Command</a></li>
		    <li><a href="#s_MarketDepthFileRecord_Flags">Flags</a></li>
		    <li><a href="#s_IntradayRecord_DateTime">DateTime</a></li>
		    <li><a href="#s_MarketDepthFileRecord_NumOrders">NumOrders</a></li>
		    <li><a href="#s_MarketDepthFileRecord_Price">Price</a></li>
		    <li><a href="#s_MarketDepthFileRecord_Quantity">Quantity</a></li>
		    <li><a href="#s_MarketDepthFileRecord_Reserved3">Reserved3</a></li>
		</ul>
	</li>
	<li><a href="#IdentifyingFullMarketDepthDataSnapshot">Identifying Full Market Depth Data Snapshot</a></li>
</ul>

<hr>

<section class="h2">
    <h2 id="DataStructures"> Market Depth Data File Structures Used</h2>
    <div class="member-link">[<a href="#DataStructures">Link</a>] - [<a href="#top">Top</a>]</div>

    <p>The market depth data file header file is as follows.  The size of this data structure is 64 bytes.   This header is at the beginning  of a market depth data file.</p>

    <pre class="Code FullLineHeight">
struct s_MarketDepthFileHeader
{
    //--- Static Members ---------------------------------------------

    // This is the minimum number of bytes that must be read in order
    // to verify the file as a depth file and read in the rest of the
    // header.
    static const int MINIMAL_HEADER_SIZE = 16;

    static const uint32_t UNIQUE_HEADER_ID = 0x44444353;  // "SCDD"

    //--- Members ----------------------------------------------------

    uint32_t FileTypeUniqueHeaderID;  // "SCDD"
    uint32_t HeaderSize;
    uint32_t RecordSize;
    uint32_t Version;

    char Reserve[48];

    //--- Methods ----------------------------------------------------

    s_Header()
    : FileTypeUniqueHeaderID(UNIQUE_HEADER_ID)
    , HeaderSize(sizeof(s_Header))
    , RecordSize(sizeof(s_Record))
    , Version(1)
    {
        memset(Reserve, 0, sizeof(Reserve));
    }

};
    </pre>

    <p>The market depth data file record structure is as follows. The size of this data structure is 24 bytes.   </p>
    
     <p>A market depth data file consists of a single header at the beginning of the file followed by records  of the s_MarketDepthFileRecord structure type. </p>

    <pre class="Code FullLineHeight">
struct s_MarketDepthFileRecord
{

    //--- Types ------------------------------------------------------

    enum CommandEnum : t_Byte
    { NO_COMMAND = 0
    , COMMAND_CLEAR_BOOK = 1
    , COMMAND_ADD_BID_LEVEL = 2
    , COMMAND_ADD_ASK_LEVEL = 3
    , COMMAND_MODIFY_BID_LEVEL = 4
    , COMMAND_MODIFY_ASK_LEVEL = 5
    , COMMAND_DELETE_BID_LEVEL = 6
    , COMMAND_DELETE_ASK_LEVEL = 7
    };
    
    //This flag indicates the end of a batch of market depth updates. 
    static const uint8_t FLAG_END_OF_BATCH = 0x01;

    //--- Members ----------------------------------------------------

    SCDateTimeMS DateTime;

    CommandEnum Command = NO_COMMAND;
    uint8_t Flags = 0;
    uint16_t NumOrders = 0;

    float Price = 0.0f;
    uint32_t Quantity = 0;
    uint32_t Reserved = 0;  // Not used, but exists due to byte padding.

    //--- Methods ----------------------------------------------------

    s_Record()
    {

    }

};
    </pre>
</section>

<section class="h2">
    <h2 id="s_MarketDepthFileRecord">s_MarketDepthFileRecord Structure Member Descriptions</h2>
    <div class="member-link">[<a href="#s_MarketDepthFileRecord">Link</a>] - [<a href="#top">Top</a>]</div>
         
    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_Command">Command</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_Command">Link</a>] - [<a href="#top">Top</a>]</div>
        
        <p> This variable is of type CommandEnum. The possible values are listed below. </p>

    <pre class="Code FullLineHeight">
enum CommandEnum : uint8_t
{ NO_COMMAND = 0
, COMMAND_CLEAR_BOOK = 1
, COMMAND_ADD_BID_LEVEL = 2
, COMMAND_ADD_ASK_LEVEL = 3
, COMMAND_MODIFY_BID_LEVEL = 4
, COMMAND_MODIFY_ASK_LEVEL = 5
, COMMAND_DELETE_BID_LEVEL = 6
, COMMAND_DELETE_ASK_LEVEL = 7
};
    </pre>
    
    </section>
    
    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_Flags">Flags</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_Flags">Link</a>] - [<a href="#top">Top</a>]</div>
        
        <p>  This variable provides one or more flags with information about the record.  The possible values are listed below.</p>


    <pre class="Code FullLineHeight">
static const uint8_t FLAG_END_OF_BATCH = 0x01;
    </pre>

    </section>

    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_DateTime">DateTime</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_DateTime">Link</a>] - [<a href="#top">Top</a>]</div>

        <p>The <b>DateTime</b> member variable is a <a href="indexac34.html?page=doc/SCDateTime.html" target="_blank" rel="noopener noreferrer">SCDateTimeMS</a> variable.  It represents the timestamp of the market depth data record command. </p> 
        
        <p>This is a 64-bit integer.  It represents the number of <em>microseconds</em> since the <a href = "indexac34.html?page=doc/SCDateTime.html#DateValue">SCDateTime epoch</a> of December 30, 1899.</p> 
        
        <p>Versions prior to 2151, use a double precision floating point type variable to represent Date-Time values.  For a complete explanation of the  Date component of this value, refer to <a href = "indexac34.html?page=doc/SCDateTime.html#DateValue">Date Value</a>.  The date value is the integer portion of the double.  The fractional portion is the Time value which is represented  as a fraction of one day where 1/86400000  is 1 ms. 86400000  is the number of milliseconds in a day. </p>

        <p>This Date and Time value must be in the UTC time zone.</p>
  
        <p>Sierra Chart provides the <b>/ACS_Source/SCDateTime.h</b> file  with various functions for working with these Date-Time values.  </p>
    </section>   


    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_NumOrders">NumOrders</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_NumOrders">Link</a>] - [<a href="#top">Top</a>]</div>


        <p>NumOrders is the number of limit orders at the Price. </p>

    </section>

    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_Price">Price</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_Price">Link</a>] - [<a href="#top">Top</a>]</div>


     <p> Price is the price of the market depth level. </p>

    </section>
    
    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_Quantity">Quantity</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_Quantity">Link</a>] - [<a href="#top">Top</a>]</div>


     <p> Quantity is the total quantity of all the limit orders at the Price. </p>

    </section>
    
    <section class="h3">
        <h3 id="s_MarketDepthFileRecord_Reserved3">Reserved3</h3>
        <div class="member-link">[<a href="#s_MarketDepthFileRecord_Reserved3">Link</a>] - [<a href="#top">Top</a>]</div>


      <p> This field is unused. It exists for padding purposes and for future use.</p>

    </section>
            
</section>


<section class="h2">
    <h2 id="IdentifyingFullMarketDepthDataSnapshot">Identifying Full Market Depth Data Snapshot</h2>
    <div class="member-link">[<a href="#IdentifyingFullMarketDepthDataSnapshot">Link</a>] - [<a href="#top">Top</a>]</div>
    
     <p> In a market depth data file the full  snapshot of all market depth levels is written to the file every 10 minutes. </p>
     
     <p>  You can identify a snapshot by  the following pattern of s_MarketDepthFileRecord records. </p>
     
     <p> A s_MarketDepthFileRecord where s_MarketDepthFileRecord::Command = s_MarketDepthFileRecord::COMMAND_CLEAR_BOOK. </p>
     
     <p>Zero or more s_MarketDepthFileRecord  records where s_MarketDepthFileRecord::Command = s_MarketDepthFileRecord::COMMAND_ADD_BID_LEVEL  or COMMAND_ADD_ASK_LEVEL.</p>
     
     <p> The final record in this snapshot batch will have s_MarketDepthFileRecord::Flags = s_MarketDepthFileRecord::FLAG_END_OF_BATCH;</p>
     
     
</section>

<hr><p>*Last modified Wednesday, 22nd February, 2023.</p>

                <div id="footer" style="font-size:66%" class="ClearBoth">
                    <hr>
                    <a href="index2a8e.html?page=doc/PurchaseInformation.php" target="_blank" rel="noopener noreferrer">Service Terms and Refund Policy</a>
                    <br><br>
                    
                </div>
            </div>
        </div>
        <script type="text/javascript" src="../images/minified.js"></script>
    </body>

<!-- Mirrored from www.sierrachart.com/index.php?page=doc/MarketDepthDataFileFormat.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:55:57 GMT -->
</html>  