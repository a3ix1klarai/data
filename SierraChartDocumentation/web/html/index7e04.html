<!doctype html>
<html lang="en">
    
<!-- Mirrored from www.sierrachart.com/index.php?page=doc/ACSILUsingStudyCalculationFunctions.php by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:51:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="Sierra Chart is a professional Trading platform for the financial markets. Supporting Manual, Automated and Simulated Trading." >
        <meta name="keywords" content="online trading platform, charting software, futures, stock, forex, discretionary trading, automated trading, trade simulator, trading system development, trading strategy development" >         

        <link rel="stylesheet" type="text/css" href="../images/minified.css" >
        
        <link rel="icon" type="image/png" sizes="192x192" href="../images/favicon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
        
        <script type="text/javascript" src="../images/jquery-2.2.4.min.js"></script>
        
        <script type="text/javascript">

    function HasPageBeenModified(filemtime = '1677105673') {
        $.ajax({
            url: '/Ajax.php',
            type: 'post',
            data: {
              'Service': 'Page',
              'Do': 'HasPageBeenModified',
              'filemtime': filemtime,
              'FileName': 'doc/ACSILUsingStudyCalculationFunctions.php',
            },
            success: function(data, status) {
              if(data['result'] == "NewPageEdits" && data['Content']) {
                    $('#NewPageEdits').remove();
                    $('#container').append('<div id="NewPageEdits">'+data['Content']+'</div>')
                    $('#NewPageEdits').dialog({
                        width: 150,
                        position: { at: 'right-96 top-5%'},
                        modal: false,
                        resizable: false,
                        create: function (event, ui) { $(event.target).parent().css('position', 'fixed'); }
                    });

                    $(".ui-dialog-titlebar").hide();
              }
            },
            error: function(xhr, desc, err) {
              console.log(xhr);
              console.log("Details: " + desc + " | Error:" + err);
            }
        });

    }

    window.setInterval(HasPageBeenModified , 900000);

</script>

        <title>Using ACSIL Study Calculation Functions -  Sierra Chart</title>
    </head>               
    <body>
        <div id="container">
            <div id="banner" class="pure-g">
    <div class="pure-u-1 pure-u-md-1-3">
        <a href="index.html"><img src="../images/sierrachartlogo.png" alt="Sierra Chart - Financial Market Charting and Trading Software" class="logo"></a>
    </div>
    <div class="pure-u-1 pure-u-md-2-3">
        <div class="pure-g">
            <div class="pure-u-1-2" style="text-align: right;">
            <div class="pure-form CSSDarkMode">
    <form method="GET">
        <input type="hidden" name="DarkMode" value="1">
        <button type="submit" class="pure-button pure-button-primary">Toggle Dark Mode</button>
    </form>
</div>
            </div>            
            <div class="pure-u-1-2">
            <div class="pure-form SearchBar">
    <form action="https://search.sierrachart.com/" method="GET">
        <input name="Query" value="" type="text" placeholder="Find" size="25">
        <input type="hidden" name="submitted" value="true">
        <input type="submit" value="Search" class="pure-button">
    </form>
</div>
            </div>
            <div class="pure-u-1">
                <h2 class="title">Sierra Chart</h2> 
                <p class="tagline">Financial Markets Charting and Trading Platform</p>    
            </div>
        </div>
    </div>
</div>
            <div class="pure-menu pure-menu-horizontal top-nav-bar">
    <ul class="pure-menu-list">
        <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Main</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index.html">Home</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa55d.html?page=doc/Whats_New.php">What Is New</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0b8.html?page=doc/Features.php">Features</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index15fc.html?page=doc/Image_gallery.php">User Image Gallery</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index079e.html?page=doc/AdditionalFiles.php">Additional Files</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9cbb.html?page=doc/AboutUs.php" >About Us</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3367.html?page=doc/OtherSitesLinks.php">Other Websites</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Documentation</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc0ca.html?page=doc/Contents.php">Table of Contents</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexef11.html?page=doc/help.php">Frequently Asked Questions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa2db.html?page=doc/VideoLibrary.php">Video Library</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php#Services">Symbols</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index3d0c.html?page=doc/DevelopingCustomStudiesAndSystems.php">Developing for Sierra Chart</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index648b.html?page=doc/BrokerServices.html">Services for Brokers</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Getting Started</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexd7a4.html?page=doc/setup.php">Sierra Chart Setup Instructions</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index7904.html?page=doc/helpdetails59.php">What Is Included in Free Trial</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index9a78.html?page=doc/FuturesData.php">Understanding Real-time  Futures Data</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Account Management</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="passwordreset.html">Account Password Reset</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="registerstep1.html">Create Account</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=AddAccountCredit">Make a Payment</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=ServicesActivation">Activate Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index2a8e.html?page=doc/PurchaseInformation.php">License and Purchase Info</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexa1cf.html?page=doc/Packages.php">Pricing</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexc97d.html?page=doc/SoftwareDownload.php">Software Download</a></li>
            </ul>
        </li><li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
            <a class="pure-menu-link" href="#">Support</a>
            <ul class="pure-menu-children">
                <li class="pure-menu-item"><a class="pure-menu-link" href="index1c87.html?page=doc/support.html">Contact</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/SupportBoard.php">* Support Board *</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index8727.html?page=doc/SelfHelp.php&amp;Source=Ticket">Self Help/Account Support Tickets</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexfda3.html?page=doc/SupportedDataAndTradingServices.php">Data/Trade Services</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php">Account Control Panel</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="indexeb88.html?page=doc/SierraChartStudyAndSystemProgrammers.php">Study &amp; System Programmers</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="https://www.sierrachart.com/UserControlPanel.php?page=StudyStore">Custom Studies Store/List</a></li>
                <li class="pure-menu-item"><a class="pure-menu-link" href="index6fe4.html?page=doc/BlockedDomains.php">Blocked Email Domains for Alerts</a></li>
            </ul>
        </li>
    </ul>
</div>
                        
<form action="https://www.sierrachart.com/UserControlPanel.php" method="post" style="margin-top:3.1em;" class="SmallLoginLogOutForm" title="Enter your Sierra Chart Account Name and Password.">
    <input class="TextInput" name="username" placeholder="SC Account Name">
    <input class="TextInput" name="password" type="password">
    <input type="submit" value="Login" >
    <input type="hidden" name="RedirectTo" value="index7e04.html?page=doc/ACSILUsingStudyCalculationFunctions.php" >
    <a href="https://www.sierrachart.com/UserControlPanel.php" target="_blank" rel="noopener noreferrer">Login Page</a>
     - <a href="registerstep1.html">Create Account</a>
    
</form>

            <div class="content">
<div class="HierarchyLinks"> <h4 id="top"><a href="index.html">Home</a> &gt;&gt; <a  href="indexc0ca.html?page=doc/Contents.php#AdvancedCustomStudySystemInterfaceandLanguage">(Table of Contents) Advanced Custom Study/System Interface and Language (ACSIL)</a> &gt;&gt; <a  href="index7e04.html?page=doc/ACSILUsingStudyCalculationFunctions.php">Using ACSIL Study Calculation Functions</a></h4> </div>     <h1 class="PageName">Using ACSIL Study Calculation Functions</h1>

<ul>
    <li><a href="#Introduction">Introduction</a></li>
    <li><a href="#Example">Example Source Code</a></li>
</ul>

<hr>

<section class="h2">
    <h2 id="Introduction">Introduction</h2>
    <div class="member-link">[<a href="#Introduction">Link</a>] - [<a href="#top">Top</a>]</div>

    <p> This page discusses how you can use the ACSIL (Advanced Custom Study Interface and Language) study calculation functions that require input arrays such as <a href="indexb9b8.html?page=doc/ACSIL_Members_Functions.html#scSimpleMovAvg">sc.SimpleMovAvg</a>, sc.MACD, ..., and pass them the result of an intermediate calculation.   </p>
    
    <p>When you simply pass an existing array such as  <b>sc.BaseData[SC_LAST]</b> as the first parameter to these functions, then this is very easy. However, what if you want to perform some intermediate calculation, before passing it to one of these study calculation functions?</p>

    <p>If you are familiar the Sierra Chart <b>Spreadsheet Studies</b>  which use a Spreadsheet for the calculations, then we will use this as an example to demonstrate what we are explaining here.  </p>
    
    
    <p>For example, say that we want to add the value of 10 to a bar Last trade price and then calculate a 10 bar moving average of those values. This will need to be done with two separate formulas and columns. </p>
    
     <p>First we add 10 and then we calculate the average. Spreadsheet column E contains the  bar Last prices. In Column Z (you can use any available formula column that does not have a visible Draw Style), we will use this formula to add 10: <span class="SpreadsheetFormula">=E3+10</span>. In Column K we will use this formula to calculate the average: <span class="SpreadsheetFormula">=AVERAGE(Z3:Z12)</span>.  </p>
     
     <p>Since the  <b>AVERAGE</b> function requires an array, this is specified through a reference to a range of cells, we first had to create a column with the data we want to calculate the average of and we did this in column Z. Therefore, you can see that you have to first perform the intermediate calculation in column Z or any available column, and then calculate the average in column K. </p>

    <p>When using the ACSIL, we also need to do, in this example, a two-step process. The way that we will accomplish this, is by using an available <a href="index40e9.html?page=doc/ACSIL_Members_scSubgraph.html#scSubgraphArrays" target="_blank" rel="noopener noreferrer">internal extra array</a> in a Subgraph or a <a href="index40e9.html?page=doc/ACSIL_Members_scSubgraph.html#scSubgraphData" target="_blank" rel="noopener noreferrer">Subgraph Data array</a> and filling it in with the a result of our intermediate calculation before passing it to one of the study calculation functions.</p>

     <p>Below is the complete code example for this. In this example we first take the Last trade price and add 10 to it and assign the result into one of the available internal extra arrays of a Subgraph.  </p>
     
     <p>Since our result is going to be placed into  <b>Subgraph[0]</b>, we are using one of those internal extra arrays.  This keeps our code very organized by using the same    Study Subgraph object. 
     
     <p>We start by using internal  array at index  11 (<b>sc.Subgraph[0].Arrays[11]</b>). Since indexing  is zero based, 11 refers to  array 12. There are MAX_STUDY_EXTRA_ARRAYS extra arrays per Subgraph.  </p>
     
     <p>We are using the last one because some study calculation functions will also use the internal extra arrays for their calculations so we do not want our result overwritten.  </p>

     <p>The documentation for each of the available study calculation functions explains how many arrays are used by a study calculation function. So you know which ones you can safely use.</p>
</section>

<section class="h2">
    <h2 id="Example">Example Source Code</h2>
    <div class="member-link">[<a href="#Example">Link</a>] - [<a href="#top">Top</a>]</div>

    <pre class="Code FullLineHeight">
SCSFExport scsf_IntermediateStudyCalculationsUsingArrays(SCStudyInterfaceRef sc)
{
    SCSubgraphRef Average = sc.Subgraph[0];
    SCInputRef Input_Length = sc.Input[0];

    if (sc.SetDefaults)
    {
        sc.GraphName = "Intermediate Study Calculations Using Arrays";

        sc.StudyDescription = "For more information about this see the Using ACSIL Study Calculation Functions documentation page.";

        sc.AutoLoop = 1;

        Average.Name = "Average";

        Average.DrawStyle = DRAWSTYLE_LINE;

        Input_Length.Name = "Moving Average Length";

        Input_Length.SetInt(10);
        Input_Length.SetIntLimits(1, 9999999);

        return;
    }

    // Here we will add 10 to the sc.BaseData Last value at the current index
    // and compute an average of it. Since the moving average function we
    // will be calling requires an input array and not a single value, we
    // will use one of the internal extra arrays on a Subgraph to hold 
    // this intermediate calculation. This internal extra array could be
    // thought of as a Spreadsheet column where you are performing intermediate
    // calculations. We will use one of the internal extra arrays that is
    // part of the Subgraph we are using to hold the output from the moving
    // average study calculation function we will be calling next. Although
    // any Subgraph internal extra array or even a Subgraph Data array
    // could be used.

    SCFloatArrayRef Last = sc.BaseData[SC_LAST];

    SCFloatArrayRef SubgraphExtraArray = Average.Arrays[0];

    SubgraphExtraArray[sc.Index] = Last[sc.Index] + 10;

    // In this function call we are passing this internal extra array and
    // we also pass in, Average (sc.Subgraph[0]), to receive the result at the 
    // current index (sc.Index).

    sc.SimpleMovAvg(SubgraphExtraArray, Average, Input_Length.GetInt());
}
    </pre>
</section>

<hr><p>*Last modified Wednesday, 22nd February, 2023.</p>

                <div id="footer" style="font-size:66%" class="ClearBoth">
                    <hr>
                    <a href="index2a8e.html?page=doc/PurchaseInformation.php" target="_blank" rel="noopener noreferrer">Service Terms and Refund Policy</a>
                    <br><br>
                    
                </div>
            </div>
        </div>
        <script type="text/javascript" src="../images/minified.js"></script>
    </body>

<!-- Mirrored from www.sierrachart.com/index.php?page=doc/ACSILUsingStudyCalculationFunctions.php by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 30 Jun 2023 16:51:50 GMT -->
</html>  